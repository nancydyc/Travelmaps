{% extends 'base.html' %}

{% block head %}
  <link rel="stylesheet" href="/static/css/maps.css"/>
  <script src="/static/js/maps.js"></script>
    <!-- load google places library before initializing map -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initAutocomplete">
  </script>
  <script> window.map_id = {{ map.map_id }} </script>
  <script type="text/javascript"></script>

{% endblock %}

{% block body %}
  <!-- Load Facebook SDK for JavaScript -->
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>

  <div class="container-fluid">
  <div class="row" style="height: 20px">
  </div>
  <div class="row">
    <div class="col-4">
      <div id="map_details">
        <h3>Map Name:</h3> <p>{{ map.map_name }}</p>
        <h3>Map Description:</h3> <p> {{ map.map_description }} </p>
        <!-- if there are places in the map, print them -->
        <h3>Places on this map:</h3>
        {%for place in places %}
          <ul>
            <h3 id="place-name-header">{{ place.google_place_name }}</h3>
            <li>Address: {{ place.address }}</li>
            <li>Website: {{ place.website }}</li>
            <li>User Notes: {{ place.user_notes }}</li>
          </ul>
        {% endfor %}
        <!-- to do: if there are no places in the map, print a message to get started... -->
      </div>
    </div>
    
    <div class="col-8">
      <!-- Google maps code -->
      <input id="pac-input" class="controls" type="text" placeholder="Search Box">
      <div id="map"></div>
      <!-- end google maps code -->
    </div>
  </div>
  <div class="row" style="height: 30px">
    <div class="col-4">
      <div id="logout">
        <form action="/logout">
            <input type="submit" value="Log Out">
        </form>
      </div>
    </div>
      <div class="col-2">
        <div id="view_shareable_map">
          <form action="/share_map/{{ map.map_url_hash }}">
              <input type="submit" value="View Shareable Map">
          </form>
        </div>
      </div>          
      <div class="col-2">
        <div id="get_shareable_link">
          <form id="get_shareable_link">
              <input type="submit" value="Get Shareable Link">
          </form>
        </div>
      </div> 
    <div class="col-2">
      <div id="share_on_fb">
        <!-- FB share button code -->
        <div class="fb-share-button" 
          data-href="http://0.0.0.0:5000/share_map/{{ map.map_url_hash }}" 
          data-layout="button_count">
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

