{% extends 'base.html' %}

{% block head %}
  <!-- Load chart.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.1/Chart.js"></script>
{% endblock %}

{% block body %}
  <!-- Bootstrap div layout -->
  <div class="container-fluid">
    <div class="row" style="height: 20px">
    </div>
    <div class="row">
      <div class="col-4">
        <div id="map_details">
          <h2>Dashboard</h2>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <div class="place_types_chart">
          <h2 id="dashboard-header">Top 5 Place Types</h2>
          <canvas id="donutChart-place-types"></canvas>
          <div id="donutLegend-place-types" class="chart-legend"></div>
        </div>
      </div>
      <div class="col-6">
        <div class="place_chart">
          <h2 id="dashboard-header">Top 5 Places</h2>
          <canvas id="donutChart-places"></canvas>
          <div id="donutLegend-places" class="chart-legend"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- Javascript code -->
  <script>
    const options = {
      responsive: true
    };

    // Make Donut Chart of top 5 place types
    let ctx_donut = $("#donutChart-place-types").get(0).getContext("2d");

    $.get("/place_type_statistics.json", function (data) {
      let myDonutChart = new Chart(ctx_donut, {
                                              type: 'doughnut',
                                              data: data,
                                              options: options
                                            });
      $('#donutLegend-place-types').html(myDonutChart.generateLegend());
    });


    // Make Donut Chart of top 5 place types
    let ctx_donut_2 = $("#donutChart-places").get(0).getContext("2d");

    $.get("/place_statistics.json", function (data) {
      let myDonutChart = new Chart(ctx_donut_2, {
                                              type: 'doughnut',
                                              data: data,
                                              options: options
                                            });
      $('#donutLegend-places').html(myDonutChart.generateLegend());
    });

  </script>
{% endblock %}